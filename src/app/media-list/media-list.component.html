<div class="list-body" class="container-fluid">
    <mat-tab-group #tabGroup dynamicHeight (click)="deleteSearchText(inputElt)">
        <mat-tab label="Series">
            <!-- <span class="me-2" [style.cursor]="'pointer'"></span> -->
        </mat-tab>
        <mat-tab label="Movies">
            <!-- <span class="me-2" [style.cursor]="'pointer'"></span> -->
        </mat-tab>
    </mat-tab-group>

    <div class="input-group sticky-top">
        <input #inputElt (keyup)="searchApiAndUserList(this.tabGroup.selectedIndex, inputElt.value)" placeholder="Rechercher..." type="text"
            class="form-control">
        <span *ngIf="inputElt.value.length>0" (click)="deleteSearchText(inputElt)" class="input-group-text"
            id="basic-addon1"><i class="fas fa-times"></i></span>
    </div>

    <div class="list-group">
        <div class="row list-group-item d-flex" *ngFor="let result of results">
            <div class="col-6 search-result">
                <img [src]="result.imageUrl">
                {{result.title}}
            </div>
            <div class="col-4 search-result">
                <span *ngIf="result.alreadyInUserList" [routerLink]="['/detail', result.imdbId, result.typeMedia]">voir le détail</span>
            </div>
            <div class="col-2" *ngIf="result.alreadyInUserList">
                <button mat-mini-fab color="warn" (click)="deleteMedia(result.imdbId,result.typeMedia, inputElt)"
                                 aria-label="delete from my list">
                                 <mat-icon>delete</mat-icon>
                             </button>
            </div>
            <div class="col-2" *ngIf="!result.alreadyInUserList" >
                <button mat-mini-fab color="primary" (click)="addMedia(result.imdbId,result.typeMedia, inputElt)"
                                 aria-label="add to my list">
                                 <mat-icon>add_circle</mat-icon>
                             </button>
            </div>

        </div>
    </div> 
    <!-- <ul class="list-group results-list">
        <li *ngFor="let result of results"
           class="list-group-item">

           <span [routerLink]="['/detail', result.imdbId, 'results']">{{result.title}}</span>
 
           <button *ngIf="result.alreadyInUserList" mat-mini-fab color="primary" (click)="deleteMedia(result.imdbId,result.typeMedia, inputElt)"
                            aria-label="delete from my list">
                            <mat-icon>delete</mat-icon>
                        </button>

           <button *ngIf="!result.alreadyInUserList" mat-mini-fab color="primary" (click)="addMedia(result.imdbId,result.typeMedia, inputElt)"
                            aria-label="delete from my list">
                            <mat-icon>add_circle</mat-icon>
                        </button>

        </li>
     </ul>  -->

    <!-- TEMPLATE SERIES-->
    <div *ngIf="this.tabGroup.selectedIndex == 0" class="row">
        <!-- <div *ngFor="let media of medialist"  class="col-12 col-lg-3 col-xl-2">                     -->
        <!-- <div [routerLink]="['/detail', media.id, 'movie']" class="card"> -->
        <!-- TEMPLATE SERIES-->
        <div class="col-12 col-md-3 col-xl-2" *ngFor="let media of series">
            <div [routerLink]="['/detail',media.imdbId,media.typeMedia]" class="card">
                <img [src]="media.imageUrl" alt="image du film ou série">
                <div class="card-body">
                    <h2>{{media.title}}</h2>
                    <app-rating [rating]="media.imdbRating/2"></app-rating>
                    <p>Saison total : {{media.numberOfSeason}}
                        <br>Ma saison :
                        <select (change)="updateSeason(media.imdbId,media.status,$event.target.value)"
                            name="saison_encours" id="saison_encours">
                            <option *ngFor="let item of [].constructor(media.numberOfSeason); let i=index"
                                [selected]="media.userSeason == (i+1)" [value]="i+1">
                                {{i+1}}</option>
                        </select>
                        <br>Année : {{media.startYear}}-{{media.endYear}}
                    </p>
                    <p>
                        <select (change)="updateStatusMedia(media.imdbId,media.typeMedia,$event.target.value)"
                            name="status">
                            <option *ngFor="let status of status_media" [selected]="status[0] === media.status"
                                [value]="status[0]">{{status[1]}}</option>
                        </select>
                        <button mat-mini-fab color="primary" (click)="deleteMedia(media.imdbId,media.typeMedia)"
                            aria-label="delete movie ou serie">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </p>

                </div>
            </div>
        </div>
    </div>
    <!-- FIN TEMPLATE SERIES-->

    <!-- TEMPLATE MOVIES-->
    <div *ngIf="this.tabGroup.selectedIndex == 1" class="row">
        <div class="col-12 col-md-3 col-xl-2" *ngFor="let media of movies">
          <div [routerLink]="['/detail',media.imdbId,media.typeMedia]" class="card">
                <img [src]="media.imageUrl" alt="image du film ou série">
                <div class="card-body">
                    <h2>{{media.title}}</h2>
                    <app-rating [rating]="media.imdbRating/2"></app-rating>
                    <p>Durée : {{media.runtime}} minutes <br>Année : {{media.startYear}}</p>
                    <p>
                        <select (change)="updateStatusMedia(media.imdbId,media.typeMedia,$event.target.value)"
                            name="status">
                            <option *ngFor="let status of status_media" [selected]="status[0] === media.status"
                                [value]="status[0]">{{status[1]}}</option>
                        </select>
                        <button mat-mini-fab color="primary" (click)="deleteMedia(media.imdbId,media.typeMedia)"
                            aria-label="delete movie ou serie">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- FIN TEMPLATE MOVIES-->

    <div class="fixed-bottom bg-info text-center p-2">
        <button (click)="loadNextSeries()" class="btn btn-light">Films suivants</button>
    </div>
</div>